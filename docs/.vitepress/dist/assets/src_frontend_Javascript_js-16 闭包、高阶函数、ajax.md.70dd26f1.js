import{o as n,c as s,d as a}from"./app.0b9a38dc.js";const p='{"title":"js-16 闭包、高阶函数、ajax","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、函数","slug":"一、函数"},{"level":2,"title":"二、闭包","slug":"二、闭包"},{"level":3,"title":"什么是闭包","slug":"什么是闭包"},{"level":3,"title":"为什么要使用闭包","slug":"为什么要使用闭包"},{"level":3,"title":"使用匿名函数实现闭包","slug":"使用匿名函数实现闭包"},{"level":3,"title":"闭包经典面试题","slug":"闭包经典面试题"},{"level":3,"title":"for循环泄漏","slug":"for循环泄漏"},{"level":3,"title":"全局污染","slug":"全局污染"},{"level":3,"title":"局部变量清除方式","slug":"局部变量清除方式"},{"level":2,"title":"三、垃圾回收机制","slug":"三、垃圾回收机制"},{"level":2,"title":"四、Event Loop，javascript执行机制","slug":"四、event-loop，javascript执行机制"},{"level":3,"title":"堆(Heap)、栈(Stack)、队列","slug":"堆-heap-、栈-stack-、队列"},{"level":3,"title":"调用栈","slug":"调用栈"},{"level":3,"title":"阻塞","slug":"阻塞"},{"level":3,"title":"webAPI（宿主环境）","slug":"webapi（宿主环境）"},{"level":3,"title":"javascript是单线程的","slug":"javascript是单线程的"},{"level":3,"title":"Event Loop","slug":"event-loop"},{"level":2,"title":"五、防抖函数","slug":"五、防抖函数"},{"level":2,"title":"六、节流函数","slug":"六、节流函数"},{"level":2,"title":"七、柯里化函数","slug":"七、柯里化函数"},{"level":2,"title":"八、偏函数","slug":"八、偏函数"},{"level":2,"title":"九、惰性函数","slug":"九、惰性函数"},{"level":2,"title":"十、字符串的函数","slug":"十、字符串的函数"},{"level":2,"title":"九、json","slug":"九、json"},{"level":2,"title":"高频面试题","slug":"高频面试题"}],"relativePath":"src\\\\frontend\\\\Javascript\\\\js-16 闭包、高阶函数、ajax.md","lastUpdated":1612089669831}',t={},o=a('<h1 id="js-16-闭包、高阶函数、ajax"><a class="header-anchor" href="#js-16-闭包、高阶函数、ajax" aria-hidden="true">#</a> js-16 闭包、高阶函数、ajax</h1><h2 id="一、函数"><a class="header-anchor" href="#一、函数" aria-hidden="true">#</a> 一、函数</h2><ol><li><p>普通函数 <code>function fn(){}</code> 调用：fn();</p></li><li><p>函数表达式 <code>var fn = function(){}</code> 调用：fn();</p></li><li><p>事件处理函数 <code>div.onclick = function(){}</code></p></li><li><p>构造函数 <code>function Fun(){} new Fun()</code>;</p></li><li><p>对象函数：<code>color:function(){}</code> 调用：color(); 括号传参；</p></li><li><p>匿名函数：<code>(function(){})()</code>，不会对外界环境造成污染，传参往后面小括号传参；</p><p>如果函数只需调用一次，就可以声明成匿名函数 , 匿名函数可以有效的保证在页面上写入 Javascript，而不会造成全局变量的污染 , 这在给一个不是很熟悉的页面增加javaScript 时非常有效，也很优美。</p><p>匿名函数还有：</p><div class="language-js"><pre><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token operator">~</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//建议写法</span>\n<span class="token operator">-</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token operator">+</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">void</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//建议写法</span>\n</code></pre></div></li></ol><h2 id="二、闭包"><a class="header-anchor" href="#二、闭包" aria-hidden="true">#</a> 二、闭包</h2><h3 id="什么是闭包"><a class="header-anchor" href="#什么是闭包" aria-hidden="true">#</a> 什么是闭包</h3><p>闭包是指有权访问另外一个函数作用域中的变量的函数；</p><p>闭包就是函数的局部变量的集合，只是这些局部变量在函数返回后会继续存在，闭包就是函数的堆栈在函数返回后并不释放，我们也可以理解为这些函数堆栈并不在栈上分配，而是在堆上分配，当在一个函数内定义另外一个函数就会产生闭包；</p><p>一句话概括：闭包就是能够读取其他函数内部变量的函数，或者子函数在外调用，子函数所在的父函数的作用域不会被释放</p><h3 id="为什么要使用闭包"><a class="header-anchor" href="#为什么要使用闭包" aria-hidden="true">#</a> 为什么要使用闭包</h3><p>匿名自执行函数：我们知道所有的变量如果不加上var关键字，则默认的会添加到全局对象的属性上去，这样的临时变量加入全局对象有很多坏处，比如：别的函数可能误用这些变量，造成全局对象过于庞大，影响访问速度（因为变量的取值是需要从原型链上遍历的）。除了每次使用变量都是用var关键字外，我们实际情况下经常遇到这样一种情况，即有的函数只需要执行一次，其内部变量无需维护，可以用闭包；</p><p>结果缓存：我们开发中会碰到很多情况，设想我们有一个处理过程很耗时的函数对象，每次调用都会花费很长时间，那么我们就需要将计算出来的值存储起来，当调用这个函数的时候，首先在缓存中查找，如果找到了，直接返回查找到的值即可；闭包正是可以做到这一点，因为它不会释放外部的引用，从而函数内部的值可以得以保留；</p><p>封装：实现类和继承等；</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">aa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">//声明必须var</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            num<span class="token operator">++</span><span class="token punctuation">;</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">aa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//使用时必须var调用aa，此时f代表bb，aa只能小括号调用一次；</span>\n</code></pre></div><p><strong>注意</strong></p><ol><li><p>使用闭包需要手动给函数清除，给变量赋值null；（闭包函数的第一层函数声明的变量，对于第二层函数也是全局污染，变量也是一直存在的，也占内存，所以使用闭包时，需要我们在用完的时候手动给函数清除，删掉，声明的函数=null）</p></li><li><p>外层函数声明变量时，必须使用var声明；（如果不使用var，就是隐式全局变量，跑到外层去了，外层函数只能调用一次，声明一个变量来调用外层的函数，再用变量调用里层的函数）；</p></li><li><p>外层函数只能调用一次，再调用里层函数；（如果是aa()()，相当于调用了两次aa，外层的变量就是重复声明，里层函数使用的外层的变量是重复的，就没有闭包的作用了）</p></li></ol><h3 id="使用匿名函数实现闭包"><a class="header-anchor" href="#使用匿名函数实现闭包" aria-hidden="true">#</a> 使用匿名函数实现闭包</h3><p>使用匿名函数自调用的特性，在匿名函数里面写事件函数，也就相当于两个函数嵌套，形成闭包了，此时外层函数还可以传入一个形参，形参也相当于局部变量，供里层函数使用，就能拿到外层函数的值了，里层函数只要占用变量，局部变量就会保存下来，就不会被清除；</p><p>函数嵌套函数，里层函数没有使用外层函数的变量，就不能算是闭包；</p><div class="language-js"><pre><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        div<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">click</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//使用的形参；</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    div<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">click</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//拿不到外面的i；</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p>引用清除：在循环套用点击事件，在点击事件里面使用i时，没有点击，i就没有占位，就会清除，所以不能取到i，当使用闭包函数传入形参i时，点击事件再使用i，就已经占位了，就不会被清除；</p><h3 id="闭包经典面试题"><a class="header-anchor" href="#闭包经典面试题" aria-hidden="true">#</a> 闭包经典面试题</h3><p>例 1：以下代码的执行结果是？如何处理？</p><div class="language-js"><pre><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\narr<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">//局部作用域  i为10；</span>\n</code></pre></div><p>例 2：以下代码的执行结果</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        <span class="token function-variable function">fun</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> \n    a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> \n    a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> \n    a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><p>解析：</p><div class="language-js"><pre><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">只传入一个参数，</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> 所以结果是<span class="token keyword">undefined</span>；\na<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//因为闭包问题，n一直存在为0，所以这个是传了1，为1,0， 之后返回到开始传(n,o)，o是0；</span>\na<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//o是0；</span>\na<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//o是0；</span>\n<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0,1,2 </span>\n    <span class="token comment">//这里前两步和上面是一样的，再fun(1)过后再次调用fun(1)，由于计算，o调用了两次为1了，后面调用为2了；</span>\n<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0</span>\nc<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1  //分开调用了两次为1</span>\nc<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 </span>\n</code></pre></div><p>例 3：以下代码的执行结果</p><div class="language-js"><pre><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h3 id="for循环泄漏"><a class="header-anchor" href="#for循环泄漏" aria-hidden="true">#</a> for循环泄漏</h3><p>for循环完之后在外面也能得到i的值，就是循环完之后的值；</p><h3 id="全局污染"><a class="header-anchor" href="#全局污染" aria-hidden="true">#</a> 全局污染</h3><p>声明在全局的变量或者函数，会一直在内存中存在，不好清除他，必须手动来；</p><h3 id="局部变量清除方式"><a class="header-anchor" href="#局部变量清除方式" aria-hidden="true">#</a> 局部变量清除方式</h3><p>在局部的变量或者函数，在代码进入函数时开始声明，执行完成就被清除了，下次再进来的时候再次声明，用完再清除，在局部的变量不会经常占用内存，不会造成全局污染；</p><p>闭包与匿名函数的区别：</p><p>匿名函数是自调用，闭包是函数嵌套函数，因为使用匿名函数之后，就已经使用了一个函数，里面再写一个事件，就是两个函数嵌套了，所以经常将匿名函数称作闭包；</p><h2 id="三、垃圾回收机制"><a class="header-anchor" href="#三、垃圾回收机制" aria-hidden="true">#</a> 三、垃圾回收机制</h2><ol><li>标记清除：声名时表示被引用，之后被使用完出了函数局部，标记清除；</li></ol><p>当变量进行执行环境时，垃圾回收器将其标记为进入环境，当变量离开环境时，将其标记为离开环境； 2. 引用清除：使用记数的方法，如果没有这个数没有加过，就清除，如果有，就保留；</p><p>在Javascript中，如果一个对象不再被引用，那么这个对象就会被GC（垃圾回收）。如果两个对象互相引用，而不再被第3者所引用，那么这两个互相引用的对象也会被回收。</p><h2 id="四、event-loop，javascript执行机制"><a class="header-anchor" href="#四、event-loop，javascript执行机制" aria-hidden="true">#</a> 四、Event Loop，javascript执行机制</h2><p>Event Loop即事件循环，是浏览器或Node的一种解决javaScript单线程运行时不会阻塞的一种机制，也是异步的原理；</p><h3 id="堆-heap-、栈-stack-、队列"><a class="header-anchor" href="#堆-heap-、栈-stack-、队列" aria-hidden="true">#</a> 堆(Heap)、栈(Stack)、队列</h3><p>堆：</p><ul><li>堆是一种数据结构，堆分为两种，一种最大堆，一种最小堆，又称大根堆，小根堆，堆是线性数据结构，相当于一维数组；对象被分配在一个堆中，即用以表示一大块非结构化的内存区域；</li></ul><p>栈：</p><ul><li>栈是一种数据结构， 它按照后进先出的原则存储数据，先进入的数据被压入栈底，最后的数据在栈顶，需要执行的时候从栈顶开始弹出数据。</li></ul><p>队列：</p><ul><li>队列中没有元素，称为空队列，队列的数据元素又称为队列元素。在队列中插入一个队列元素称为入队，从队列中删除一个队列元素称为出队。因为队列只允许在一端插入，在另一端删除，所以只有最早进入队列的元素才能最先从队列中删除，故队列又称为先进先出（FIFO—first in first out）；</li></ul><p>事件队列是一块内存空间，用于存放执行时机到达的异步函数，当js引擎空闲时（执行栈里没有可执行的上下文），他会从事件队列中拿出第一个函数执行；</p><p>栈和队列的区别：队列先进先出，栈先进后出</p><h3 id="调用栈"><a class="header-anchor" href="#调用栈" aria-hidden="true">#</a> 调用栈</h3><p>单线程的运行环境，它有且只有一个调用栈，它每次只能够做一件事，程序每次只可以运行一段代码；</p><p>调用栈是一个记录当前程序所在位置的数据结构，某个函数，这个函数就被放在栈里面，如果当前离开了某个函数，这个函数就会被弹出栈外，这是栈所做的事</p><p>当运行一个文件时，将会有一个类似main的函数，它指代文件自身，当遇到一个函数时，则会推进栈中，当调用完时，则根据后进先出的原则，开始向下执行；</p><p>下图运行printSquare时，则会一个一个的放入stack中，当放入完成时，则会后进先出的开始执行；（如果是每一行都是普通的console.log，则stack里面始终只会推进一行代码，当全部栈清空时，main也会被推出栈）</p><p><img src="https://notecdn.heny.vip/images/js-16_%E9%97%AD%E5%8C%85%E3%80%81%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E3%80%81ajax-01.png" alt="image"></p><p><img src="https://notecdn.heny.vip/images/js-16_%E9%97%AD%E5%8C%85%E3%80%81%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E3%80%81ajax-02.png" alt="image"></p><p>以下以栈树的形式打印出来了；</p><p><img src="https://notecdn.heny.vip/images/js-16_%E9%97%AD%E5%8C%85%E3%80%81%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E3%80%81ajax-03.png" alt="image"></p><h3 id="阻塞"><a class="header-anchor" href="#阻塞" aria-hidden="true">#</a> 阻塞</h3><p>在栈里的表现很慢的东西都叫阻塞，比如：网络请求很慢；</p><h3 id="webapi（宿主环境）"><a class="header-anchor" href="#webapi（宿主环境）" aria-hidden="true">#</a> webAPI（宿主环境）</h3><p>DOM、ajax、setTimeout并不在v8源码里，而在webAPI，意味着，这几个不是浏览器处理的，是webAPI处理的，当webapi处理完成时，则会将它们推入task queue中，当调用栈没有内容时，则会输入task queue的内容；</p><p><img src="https://notecdn.heny.vip/images/js-16_%E9%97%AD%E5%8C%85%E3%80%81%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E3%80%81ajax-04.png" alt="image"></p><p><img src="https://notecdn.heny.vip/images/js-16_%E9%97%AD%E5%8C%85%E3%80%81%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E3%80%81ajax-05.png" alt="image"></p><h3 id="javascript是单线程的"><a class="header-anchor" href="#javascript是单线程的" aria-hidden="true">#</a> javascript是单线程的</h3><p>主要用途是与用户交互，操作dom，因此只能是单线程，</p><p>所有同步任务都会放到栈中，回调函数都会放在任务对列，只有执行栈全部清空才会执行任务队列，回调函数比如定时器。</p><p>setTimout的最小时间是4ms，低于4毫秒自动设为4ms。同步任务和异步任务</p><p>Javascript单线程任务被分为同步任务和异步任务，</p><p>同步任务会在调用栈中按照顺序等待主线程依次执行，</p><p>异步任务会在异步任务有了结果后，将注册的回调函数放入任务队列中等待主线程空闲的时候（调用栈被清空），被读取到栈内等待主线程的执行。</p><p>任务队列Task Queue，即队列，是一种先进先出的一种数据结构。</p><h3 id="event-loop"><a class="header-anchor" href="#event-loop" aria-hidden="true">#</a> Event Loop</h3><p>在JavaScript中，异步任务被分为两种：</p><p>宏任务(MacroTask)：script、setTimeout、setInterval、setImmediate、I/O、UI rendering；</p><p>微任务(MicroTask)：Process.nextTick、promise、mutationObserver</p><p>这里很多人会有个误区，认为微任务快于宏任务，其实是错误的。因为宏任务中包括了 script ，浏览器会先执行一个宏任务，接下来有异步代码的话才会先执行微任务。</p><p>Event Loop执行顺序如下：</p><ul><li>首先执行同步代码，这属于宏任务</li><li>当执行完所有同步代码后，执行栈为空，查询是否有事件队列需要执行</li><li>执行所有微任务</li><li>当执行完所有微任务后， 如有必要会渲染页面</li><li>然后开始下一轮Event Loop，执行宏任务中的异步代码，也就是setTimeout中的回调函数</li></ul><p>理解： javascript按照同步执行，遇到promise则执行promise里的语句，如果有then则放到微任务队列中；</p><p>直到一圈执行完成，再开始执行微任务中的任务；</p><p>遇到setTimeout放到宏队列的最后边，直到所有的微任务执行完成，开始执行宏队列中的任务；</p><div class="language-js"><pre><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 end&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;setTimeout&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>\n\n<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script end&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/*\nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsetTimeout\n*/</span>\n</code></pre></div><p>nodejs的</p><p>process.nextTick(不推荐使用)和setImmediate的值是一个回调函数。</p><p>process.nextTick 方法可以在当前&quot;执行栈&quot;的尾部之前执行。比settimeout先执行，</p><p>setImmediate方法则是在当前&quot;任务队列&quot;的尾部添加事件，它指定的任务总是注册到下一次Event Loop时执行，同一轮的event先执行，如同setTimeout(func, 0)</p><p>多个process.nextTick语句总是在当前&quot;执行栈&quot;一次执行完，多个setImmediate可能则需要多次loop才能执行完。</p><div class="language-js"><pre><code>process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><p>将会一直循环递归，不会去执行其他的代码</p><p>浏览器的主要组件包括调用堆栈，事件循环，任务队列和web API，js调用栈是先进不出的，js引擎每次从堆栈中取出一个函数，然后从上到下依次运行代码，每当它遇到一些异步代码，如setTimeout，它就把它交给webAPI，因此每当事件被触发时，callback都会被发送到任务队列；</p><p>事件循环不断的监视任务队列，并按它们排队的顺序一次处理一个回调，每当调用堆栈为空时，Event loop获取回调并将其放入堆栈中进行处理，请记住，如果调用堆栈不是空的，则事件循环不会将任何推入堆栈；</p><h2 id="五、防抖函数"><a class="header-anchor" href="#五、防抖函数" aria-hidden="true">#</a> 五、防抖函数</h2><p>触发高频事件（如resize，scroll）后n秒内函数只会执行一次，如果n秒内高频事件再次被触发，则重新计算时间</p><p>如果一直输出触发事件，则会在最后一步才执行事件；</p><p><strong>思路</strong> ： 每次触发事件时都取消之前的延时调用方法；需要定制一个定时器，设定多少秒；</p><p><strong>理解</strong> ：给输入框绑定oninput事件，会在输入框里按下就执行一次，这时使用防抖函数，用户按下之后，前一个字符输入完成与后一个字符输入完成时间 间隔内必须等待多少秒才能执行，如果一直输入就不会执行；</p><p>作用：</p><ol><li><p>搜索：在用户输完最后一个数字才调用该函数；</p></li><li><p>在点击star时，希望在用户点击之后，间隔多久才能再次点击；</p></li></ol><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>wait<span class="token operator">=</span><span class="token number">500</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>   <span class="token comment">// 通过闭包定义一个空的定时器;</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 必须返回一个函数，否则不成功;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;防抖成功&#39;</span><span class="token punctuation">)</span>   <span class="token comment">// 可以传入一个函数执行</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>wait<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>   <span class="token comment">//调用方法时记得带小括号，执行返回的函数;</span>\nipt<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><p>简单版的缺陷：只能在最后一次调用，一般防抖会有immediate选项，表示立即调用；</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>wait<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>immediate<span class="token operator">=</span><span class="token boolean">true</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n  <span class="token keyword">let</span> timer<span class="token punctuation">,</span>context<span class="token punctuation">,</span>args  <span class="token comment">// 声明三个参数,一个为定时器,一个为上下文,一个为参数;</span>\n  <span class="token comment">// 定义一个later来设置延迟定时器</span>\n  <span class="token comment">// status状态来确定是第一次触发还是第二次</span>\n  <span class="token keyword">const</span> <span class="token function-variable function">later</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n    timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment">// 延迟函数执行完毕则清除序号;</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>immediate <span class="token operator">||</span> status <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>\n      context <span class="token operator">=</span> args <span class="token operator">=</span> <span class="token keyword">null</span>   <span class="token comment">// 使用完成之后清除;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>wait<span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    context <span class="token operator">=</span> <span class="token keyword">this</span>\n    args <span class="token operator">=</span> params\n    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 判断timer不存在的情况;</span>\n      timer <span class="token operator">=</span> <span class="token function">later</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>\n      <span class="token keyword">if</span><span class="token punctuation">(</span>immediate<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>args<span class="token punctuation">)</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      <span class="token comment">// 如果点击快了会触发这里,每次点击清除定时器,重新创建定时器,所以定时器只会在最后停留触发</span>\n      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>\n      timer <span class="token operator">=</span> <span class="token function">later</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="六、节流函数"><a class="header-anchor" href="#六、节流函数" aria-hidden="true">#</a> 六、节流函数</h2><p>高频事件触发，但在n秒内只会执行一次，所以节流会稀释函数的执行频率</p><p>高频触发事件，会几秒内执行几次；</p><p><strong>思路</strong>： 每次触发事件时都判断当前是否有等待执行的延时函数</p><p><strong>理解</strong>：给输入框绑定oninput事件，会在输入框里按下就执行一次，这时使用防抖函数，用户按下之后不会一直执行，会在定时器多少秒之后再次执行；减少执行的次数；</p><p>当第二次执行的时间和第一次执行的时间没有大过我自己设定的时间，就不执行；</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token comment">// 设定一个开关</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// 判断是否有等待延时函数,如果开关为false则return不执行;</span>\n        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">// 将开头为false;</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;节流中...&#39;</span><span class="token punctuation">)</span>\n            flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment">// 执行完定时器 开关为true;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 第二种</span>\n<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">var</span> lastTime <span class="token operator">=</span> <span class="token keyword">null</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">var</span> curTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>curTime <span class="token operator">-</span> lastTime <span class="token operator">&gt;=</span> delay<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n            lastTime <span class="token operator">=</span> curTime   <span class="token comment">// 给lastTime改变值,就不满足传入的delay了;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="七、柯里化函数"><a class="header-anchor" href="#七、柯里化函数" aria-hidden="true">#</a> 七、柯里化函数</h2><p><strong>定义</strong>：函数柯里化又叫部分求值，柯里化是一种将使用多个参数的函数转换成一系列使用一个参数的函数，并且返回接受余下的参数而且返回结果的新函数的技术；</p><p><strong>理解</strong>：只传递给函数一部分参数来调用它，让它返回一个新函数去处理剩下的参数；</p><p>bind函数也是柯里化的一种；</p><p>实现一个currying函数，判断当前参数长度够不够，参数不够返回一个新函数，参数够了立马执行；</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">currying</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>length</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token comment">// 第一次调用不需要指定length,主要是用来判断形参个数;</span>\n    length <span class="token operator">=</span> length <span class="token operator">||</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">;</span>   <span class="token comment">// 保留数组长度;</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 返回一个新函数;并使用新函数进行传参;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> length<span class="token punctuation">)</span><span class="token punctuation">{</span>\n            <span class="token comment">//递归出口,判断长度是否相等;</span>\n            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span>  <span class="token comment">// 如果满足参数，则执行;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token comment">// 参数未满足,重新返回新函数,进行递归;</span>\n            <span class="token keyword">return</span> <span class="token function">currying</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span>length<span class="token operator">-</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> \n             <span class="token comment">// 因为有传入的参数,所以使用bind将参数传入一部分;  递归函数必须返回,否则没有返回值;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="八、偏函数"><a class="header-anchor" href="#八、偏函数" aria-hidden="true">#</a> 八、偏函数</h2><p>偏函数，partial application，也叫做部分应用、局部应用、偏应用；</p><p>偏函数指的是对一个函数应用一个或多个参数，但不是全部参数，在这个过程中创建一个新函数，这个函数用于接收剩余的参数；</p><p>偏函数和柯里函数的区别：</p><ul><li>柯里化：函数分解为多个函数，只有传入的参数数量与希望参数数量相同，函数才会调用；</li><li>偏函数：没有参数数量的限制，可以使用任意数量的参数来应用它；</li></ul><p>简单实现：传入一个函数，将偏函数化，不限制传入的数量，即可以执行；</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>params</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span><span class="token operator">...</span>params<span class="token punctuation">]</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="九、惰性函数"><a class="header-anchor" href="#九、惰性函数" aria-hidden="true">#</a> 九、惰性函数</h2><p>原理就是解决每次调用都要进行判断的这个问题，将函数重写，第一次运行之后就会覆写这个方法，下一次再运行的时候就不会执行判断了。</p><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> t<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 需要返回;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">==</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span> <span class="token comment">// 如果a等于b则执行上面的函数;返回需要执行一下;</span>\n\n\n<span class="token comment">// 利用惰性函数来重写事件;</span>\n<span class="token keyword">function</span> <span class="token function">addEvent</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> el<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function-variable function">addEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> el<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function-variable function">addEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> el<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            el<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&#39;on&#39;</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 闭包形式</span>\n<span class="token keyword">var</span> addEvent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> el<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> el<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            el<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&#39;on&#39;</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h2 id="十、字符串的函数"><a class="header-anchor" href="#十、字符串的函数" aria-hidden="true">#</a> 十、字符串的函数</h2><div class="language-js"><pre><code><span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;console.log(&quot;hello&quot;+name)&#39;</span><span class="token punctuation">)</span>\n<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&#39;ming&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// hello ming</span>\n</code></pre></div><h2 id="九、json"><a class="header-anchor" href="#九、json" aria-hidden="true">#</a> 九、json</h2><ol><li>json支持IE8+，如果需要IE8以下支持，需要下载一个json文件，一般是json2.js；</li></ol><p><code>JSON.parse()</code>; 将长得像数组的字符串，转为真正的字符串；比如：&#39;[1,2,3]&#39;</p><p><code>JSON.stringify()</code>; 将数组转为字符串；</p><p>json创建对象是严格模式的，必须使用双引号，单引号也是不行的；</p><h2 id="高频面试题"><a class="header-anchor" href="#高频面试题" aria-hidden="true">#</a> 高频面试题</h2><p>● 什么是闭包，闭包有什么作用，说说你对闭包的理解。</p><p>● 用闭包方式完成下面代码的修改，使得属性 user，id 外界不可见</p><div class="language-js"><pre><code><span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token class-name">User</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>\n    Id<span class="token operator">:</span>””<span class="token punctuation">,</span>\n    Name<span class="token operator">:</span>””<span class="token punctuation">,</span>\n    <span class="token function-variable function">getId</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">setId</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">getName</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">setName</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p>● 写一个 mul 函数，使用方法如下</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//24</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//48</span>\n</code></pre></div><p>● 创建 ajax 的过程。</p><p>● ajax 请求的时候 get 和 post 方式的区别，什么时候用 post。</p><p>● ajax 请求时，如何解释 json 数据。</p><p>● 同步和异步的区别 ?</p><p>● 常见的 http 状态码？</p><p>● eval 的作用是？</p><p>● js 哪些操作会造成内存泄露？</p>',148);t.render=function(a,p,t,c,e,u){return n(),s("div",null,[o])};export default t;export{p as __pageData};
