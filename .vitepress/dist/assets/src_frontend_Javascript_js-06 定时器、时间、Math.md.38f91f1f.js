import{o as n,c as a,d as s}from"./app.bd8718b4.js";const t='{"title":"js-06 定时器、时间、Math","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、定时器","slug":"一、定时器"},{"level":3,"title":"setInterval","slug":"setinterval"},{"level":3,"title":"requestAnimationFrame","slug":"requestanimationframe"},{"level":2,"title":"二、时间对象","slug":"二、时间对象"},{"level":3,"title":"获取时间","slug":"获取时间"},{"level":3,"title":"设置时间","slug":"设置时间"},{"level":3,"title":"获取星期和月数","slug":"获取星期和月数"},{"level":3,"title":"格式化时间","slug":"格式化时间"},{"level":3,"title":"计算一个循环花了多长时间","slug":"计算一个循环花了多长时间"},{"level":3,"title":"时间的比较","slug":"时间的比较"},{"level":3,"title":"常见bug","slug":"常见bug"},{"level":3,"title":"时间格式化函数","slug":"时间格式化函数"},{"level":2,"title":"三、dayjs用法","slug":"三、dayjs用法"},{"level":3,"title":"获取&设置","slug":"获取-设置"},{"level":3,"title":"操作","slug":"操作"},{"level":3,"title":"查询","slug":"查询"},{"level":3,"title":"显示","slug":"显示"},{"level":3,"title":"时长duration","slug":"时长duration"},{"level":2,"title":"四、Math","slug":"四、math"},{"level":3,"title":"Math.random","slug":"math-random"}],"relativePath":"src\\\\frontend\\\\Javascript\\\\js-06 定时器、时间、Math.md","lastUpdated":1615699077384}',p={},e=s('<h1 id="js-06-定时器、时间、math"><a class="header-anchor" href="#js-06-定时器、时间、math" aria-hidden="true">#</a> js-06 定时器、时间、Math</h1><h2 id="一、定时器"><a class="header-anchor" href="#一、定时器" aria-hidden="true">#</a> 一、定时器</h2><ol><li><code>setTimeout(fn[,delay,arg1,arg2,...])</code>;</li></ol><p>后面的arg会作为参数传递给定时器函数中；</p><p>只执行一次，不用加单位，单位是毫秒；</p><p>清楚Timeout定时器：clearTimeout(定时器);</p><p><strong>setTimeout的原理</strong></p><p>采用定时器需要动用红黑树，创建定时器对象和迭代等操作；</p><p>很多人为了立即异步执行一个任务，会调用<code>setTimeout(function(){},0)</code>使用0毫秒来达到效果，由于事件循环自身的特点，定时器的精确度不够。事实上，采用定时器需要动用红黑树，创建定时器对象和迭代等操作，而<code>setTimeout(fn, 0)</code>的方式较为浪费性能。实际上，<code>process.nextTick()</code>方法的操作相对较为轻量，具体代码如下：</p><div class="language-js"><pre><code>process<span class="token punctuation">.</span><span class="token function-variable function">nextTick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">//on the way out, don&#39;t bother.</span>\n    <span class="token comment">// it won&#39;t get fired anyway</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>_exiting<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n    \n    <span class="token keyword">if</span><span class="token punctuation">(</span>tickDepth <span class="token operator">&gt;=</span> process<span class="token punctuation">.</span>maxTickDepth<span class="token punctuation">)</span>\n        <span class="token function">maxTickWarn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    \n    <span class="token keyword">var</span> tock <span class="token operator">=</span> <span class="token punctuation">{</span> callback<span class="token operator">:</span> callback <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>domain<span class="token punctuation">)</span> tock<span class="token punctuation">.</span>domain <span class="token operator">=</span> process<span class="token punctuation">.</span>domain<span class="token punctuation">;</span>\n    nextTickQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tock<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>nextTickQueue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        process<span class="token punctuation">.</span><span class="token function">_needTickCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n        \n<span class="token punctuation">}</span>\n</code></pre></div><p>每次调用<code>process.nextTick()</code>方法，只会将回调函数放入队列中，在下一轮Tick时取出执行。定时器中采用红黑树的操作时间复杂度为0(lg(n))，nextTick()的时间复杂度为0(1)。相较之下，process.nextTick()更高效。</p><h3 id="setinterval"><a class="header-anchor" href="#setinterval" aria-hidden="true">#</a> setInterval</h3><p><code>setInterval(函数，时间(毫秒))</code>;</p><p>间歇性执行，每隔相同的时间执行一次；</p><p>常用于倒计时；清除：<code>clearInterval(定时器)</code>;</p><p>每个定时器开启的时候，都有一个自己的id数字，如果需要清除定时器，则需要清除定时器的id； 返回值就是定时器的id值；</p><p>定时器如果不清除，会一直占用内存，可以设置一个变量，用来保存这个定时器，之后设置一个清除定时器的方法；</p><h3 id="requestanimationframe"><a class="header-anchor" href="#requestanimationframe" aria-hidden="true">#</a> requestAnimationFrame</h3><p><code>requestAnimationFrame()</code> IE10+ 不需要设置间隔，会自动调用； 案例：</p><div class="language-js"><pre><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>\n<span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    a<span class="token operator">--</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>\n    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span>\n\n    <span class="token comment">//如果需要传入参数</span>\n    <span class="token comment">// requestAnimationFrame(()=&gt;step(1))</span>\n<span class="token punctuation">}</span>\n<span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre></div><p>兼容处理：</p><div class="language-js"><pre><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>requestAnimationFrame<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token function-variable function">requestAnimationFrame</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span>  <span class="token comment">// 因为刷新频率是16.7ms执行一次，所以是17;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="二、时间对象"><a class="header-anchor" href="#二、时间对象" aria-hidden="true">#</a> 二、时间对象</h2><h3 id="获取时间"><a class="header-anchor" href="#获取时间" aria-hidden="true">#</a> 获取时间</h3><blockquote><p>创建时间，返回一个对象，这个对象里面就有各种属性和方法，时间对象时需要实例化获取方式来获取</p></blockquote><ol><li><p><code>new Date()</code>; 获取当前时间；</p></li><li><p><code>new Date(&quot;2018/4/29 12:00:00&quot;)</code>; 设置时间；中划线，逗号(不用加引号)，或者时间戳；</p><div class="language-js"><pre><code><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 添加一个+号会变成时间戳</span>\n</code></pre></div></li><li><p><code>getFullYear()</code>; 年，获取到的内置对象是当前变量中的日期</p></li><li><p><code>getMonth()+1</code>； 月，月份是0-11</p></li><li><p><code>getDate()</code>; 日；</p></li><li><p><code>getDay()</code>； 星期，取值0-6,0表示周日；</p></li><li><p><code>getHours()</code>; 时间；</p></li><li><p><code>getMinutes()</code>; 分钟；</p></li><li><p><code>getSeconds()</code>; 秒；</p></li><li><p><code>getMilliseconds()</code> 获取毫秒；</p></li><li><p><code>getTime()</code>；从1970年1月1日到当前设置好的时间的毫秒；（常用）</p></li><li><p><code>Date.parse()</code>；将一个格式的时间转为一个时间戳，毫秒；（可以直接放入new Date，也可以写格式时间，格式为：&#39;月/日/年&#39;）</p></li><li><p><code>setTime()</code> 设置时间戳，也可以直接放进new Date里面；</p></li></ol><p>简写：+new Date() 也是一个时间戳；</p><h3 id="设置时间"><a class="header-anchor" href="#设置时间" aria-hidden="true">#</a> 设置时间</h3><p>date.setDate(date.getDate() + 7);</p><p>设置时间需要先获取时间；</p><p>有<code>get</code>的属性都可以<code>set</code>；<strong>set有容错能力</strong>，如：61秒就是1分1秒；</p><div class="language-js"><pre><code><span class="token comment">// 设置日期加7天；</span>\n<span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 从声明开始就已经定死了,一直是该时间;</span>\ndate<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 设置日期加7天；</span>\n<span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ndate<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h3 id="获取星期和月数"><a class="header-anchor" href="#获取星期和月数" aria-hidden="true">#</a> 获取星期和月数</h3><ul><li><p><strong>获取这个月有多少天</strong>：<code>new Date(y,m,0).getDate()</code>；</p></li><li><p><strong>获取当前是这个月的周几</strong>：<code>new Date(y,m,0).getDay()</code>；</p></li><li><p><strong>获取这个月的第一天是周几</strong>：<code>new Date(y,m-1,0).getDay()+1</code>;</p><p>先获取上一个月多少天，再获取星期时加一天就是这个月的第一天；</p></li><li><p>如果想<strong>获取当前月份最后一天</strong>，可以直接设置日为0，<code>setDate(0)</code></p></li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> date<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取当前时间</span>\n<span class="token keyword">var</span> y<span class="token operator">=</span>date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取年</span>\n<span class="token keyword">var</span> m<span class="token operator">=</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//获取月</span>\n<span class="token keyword">var</span> d<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span>m<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取当前这个月有多少天</span>\n<span class="token keyword">var</span> week<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//获取当前这个月第一天是周几</span>\n<span class="token keyword">if</span><span class="token punctuation">(</span>week <span class="token operator">&gt;=</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">{</span>week<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//7+1会为8，所以等于0</span>\n</code></pre></div><h3 id="格式化时间"><a class="header-anchor" href="#格式化时间" aria-hidden="true">#</a> 格式化时间</h3><h4 id="英文状态"><a class="header-anchor" href="#英文状态" aria-hidden="true">#</a> 英文状态</h4><p>字符串格式时间：</p><p>toString(); Thu May 02 2019 01:24:10 GMT+0800 (中国标准时间)</p><p>toDateString(); Thu May 02 2019；</p><p>toTimeString(); 01:24:56 GMT+0800；</p><p>toUTCString(); 显示世界时间；</p><h4 id="转成本地时间"><a class="header-anchor" href="#转成本地时间" aria-hidden="true">#</a> 转成本地时间</h4><p>toLocaleString(); //2019-7-11 21:49:52</p><p>toLocaleDateString(); //2019-7-11</p><p>toLocaleTimeString(); //上午9:00:00;</p><h4 id="设置一个倒计时"><a class="header-anchor" href="#设置一个倒计时" aria-hidden="true">#</a> 设置一个倒计时</h4><p>计算两个时间的间隔，用第一个时间减去第二个时间；</p><ol><li><p>计算出目标时间和现在时间的间隔多少毫秒，用目标时间减去现在的时间，之后再除以一千显示为秒；</p><p>计算倒计时剩下的时间：</p><div class="language-js"><pre><code><span class="token keyword">var</span> leftTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>enddate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//计算剩余的毫秒数</span>\n<span class="token keyword">var</span> days <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>leftTime <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//计算剩余的天数</span>\n<span class="token keyword">var</span> hours <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>leftTime <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">%</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//计算剩余的小时</span>\n<span class="token keyword">var</span> minutes <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>leftTime <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//计算剩余的分钟</span>\n<span class="token keyword">var</span> seconds <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>leftTime <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//计算剩余的秒数</span>\n\ns <span class="token operator">=</span> <span class="token number">1242626</span>\nm <span class="token operator">=</span> s <span class="token operator">/</span> <span class="token number">60</span>\nh <span class="token operator">=</span> s <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span>\nt <span class="token operator">=</span> s <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">24</span>\n</code></pre></div></li><li><p>根据计算出的时间写出时间戳，也可以再加入补零的操作</p></li><li><p>倒计时思想：</p><ul><li>获取时间，根据时间得到年月日，时分秒</li><li>补零</li><li>用一个定时器让时间跑起来</li></ul></li></ol><h3 id="计算一个循环花了多长时间"><a class="header-anchor" href="#计算一个循环花了多长时间" aria-hidden="true">#</a> 计算一个循环花了多长时间</h3><div class="language-js"><pre><code><span class="token keyword">let</span> startTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 记录一个开始时间毫秒</span>\n<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token keyword">let</span> endTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 记录一个结束时间毫秒</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span>\n\n<span class="token comment">// 当然也可以使用console.time来获取;</span>\n</code></pre></div><h3 id="时间的比较"><a class="header-anchor" href="#时间的比较" aria-hidden="true">#</a> 时间的比较</h3><p>不要直接通过时间对比，是不相等的，想要相等，可以对比时间戳</p><div class="language-js"><pre><code><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&#39;2019/6/1&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">let</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&#39;2019/6/1&#39;</span><span class="token punctuation">)</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date <span class="token operator">==</span> date2<span class="token punctuation">)</span>  <span class="token comment">// false</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> date2<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">//true</span>\n<span class="token comment">// +号可以快速进行Number转换成时间戳</span>\n</code></pre></div><p>时间插件： <a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer">http://momentjs.cn/</a></p><p>比moment打包更小的插件：dayjs <a href="https://github.com/iamkun/dayjs" target="_blank" rel="noopener noreferrer">https://github.com/iamkun/dayjs</a></p><h3 id="常见bug"><a class="header-anchor" href="#常见bug" aria-hidden="true">#</a> 常见bug</h3><p>如果获取最后一天出错了，跳了月份，可以设置setMonth(28)即可，或者29，再getMonth+1</p><h3 id="时间格式化函数"><a class="header-anchor" href="#时间格式化函数" aria-hidden="true">#</a> 时间格式化函数</h3><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>\n  <span class="token keyword">let</span> <span class="token constant">Y</span> <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">let</span> <span class="token constant">M</span> <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>\n  <span class="token keyword">let</span> <span class="token constant">R</span> <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">let</span> h <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">let</span> m <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">let</span> s <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">let</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token function">String</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">Y</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">M</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">R</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">f</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">f</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">f</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>\n<span class="token punctuation">}</span>\n</code></pre></div><h2 id="三、dayjs用法"><a class="header-anchor" href="#三、dayjs用法" aria-hidden="true">#</a> 三、dayjs用法</h2><blockquote><p>推荐使用dayjs，和moment用法一致，但是打包更小，moment打包之后200k，dayjs打包之后2k</p></blockquote><p>官方网站：<a href="https://day.js.org/docs/zh-CN/parse/parse" target="_blank" rel="noopener noreferrer">dayjs中文教程</a></p><p>支持链式调用</p><p>安装：<code>npm i dayjs</code></p><h3 id="获取-设置"><a class="header-anchor" href="#获取-设置" aria-hidden="true">#</a> 获取&amp;设置</h3><p>年<code>y</code>：<code>year</code></p><p>月<code>M</code>：<code>month</code>（一月0，十二月11）</p><p>日<code>D</code>：<code>date</code></p><p>星期<code>d</code>：<code>day</code> (星期天0，星期六6)</p><p>时<code>h</code>：<code>hour</code></p><p>分<code>m</code>：<code>minute</code></p><p>秒<code>s</code>：<code>second</code></p><p>毫秒<code>ms</code>：<code>millisecond</code></p><p>示例：</p><ul><li>获取年：<code>dayjs().year()</code> 也可以：<code>dayjs().get(&#39;year&#39;)</code>，缩写：<code>dayjs().get(&#39;y&#39;)</code></li><li>设置年：<code>dayjs().year(2000)</code> 也可以：<code>dayjs().set(&#39;year&#39;, 2000)</code></li></ul><h3 id="操作"><a class="header-anchor" href="#操作" aria-hidden="true">#</a> 操作</h3><p>都可以使用缩写</p><div class="language-js"><pre><code><span class="token comment">// 格式化, 里面会检测字母, 大写H是24小时制 小写是12</span>\n<span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;YYYY-MM-DD hh:mm:ss A&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 2021-01-10 04:39:28 PM</span>\n\n<span class="token comment">// 获取一月初</span>\n<span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startOf</span><span class="token punctuation">(</span><span class="token string">&#39;month&#39;</span><span class="token punctuation">)</span>\n\n<span class="token comment">// 获取一年年末</span>\n<span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endOf</span><span class="token punctuation">(</span><span class="token string">&#39;year&#39;</span><span class="token punctuation">)</span>\n\n<span class="token comment">// 增加7天</span>\n<span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&#39;days&#39;</span><span class="token punctuation">)</span> \n\n<span class="token comment">// 减少7天</span>\n<span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&#39;days&#39;</span><span class="token punctuation">)</span>\n\n<span class="token comment">// 上个月, months可用: day</span>\n<span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;months&#39;</span><span class="token punctuation">)</span>\n</code></pre></div><ul><li>startOf和endOf支持的单位（支持缩写）：</li></ul><table><thead><tr><th>单位</th><th>缩写</th><th>详情</th></tr></thead><tbody><tr><td><code>year</code></td><td><code>y</code></td><td>今年一月1日上午 12:00</td></tr><tr><td><code>quarter</code></td><td><code>Q</code></td><td>本季度第一个月1日上午 12:00 ( 依赖 <a href="https://day.js.org/docs/zh-CN/plugin/quarter-of-year" target="_blank" rel="noopener noreferrer"><code>QuarterOfYear</code></a>插件 )</td></tr><tr><td><code>month</code></td><td><code>M</code></td><td>本月1日上午 12:00</td></tr><tr><td><code>week</code></td><td><code>w</code></td><td>本周的第一天上午 12:00</td></tr><tr><td><code>isoWeek</code></td><td></td><td>本周的第一天上午 12:00 (根据 ISO 8601) ( 依赖 <a href="https://day.js.org/docs/zh-CN/plugin/iso-week" target="_blank" rel="noopener noreferrer"><code>IsoWeek</code></a>插件 )</td></tr><tr><td><code>date</code></td><td><code>D</code></td><td>今天上午 12:00</td></tr><tr><td><code>day</code></td><td><code>d</code></td><td>今天上午 12:00</td></tr><tr><td><code>hour</code></td><td><code>h</code></td><td>now, but with 0 mins, 0 secs, and 0 ms</td></tr><tr><td><code>minute</code></td><td><code>m</code></td><td>now, but with 0 seconds and 0 milliseconds</td></tr><tr><td><code>second</code></td><td><code>s</code></td><td>now, but with 0 milliseconds</td></tr></tbody></table><h3 id="查询"><a class="header-anchor" href="#查询" aria-hidden="true">#</a> 查询</h3><ul><li><p>早于：<code>dayjs(&#39;2010-10-20&#39;).isBefore(&#39;2010-10-21&#39;)</code> 返回true</p></li><li><p>晚于：<code>isAfter</code></p></li><li><p>闰年：</p><div class="language-js"><pre><code><span class="token keyword">var</span> isLeapYear <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;dayjs/plugin/isLeapYear&quot;</span><span class="token punctuation">)</span>\ndayjs<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>isLeapYear<span class="token punctuation">)</span> <span class="token comment">// 必须使用插件</span>\n<span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre></div></li><li><p>返回月份的天数：<code>dayjs().dayslnMonth()</code></p></li></ul><h3 id="显示"><a class="header-anchor" href="#显示" aria-hidden="true">#</a> 显示</h3><ul><li><code>format</code></li></ul><div class="language-js"><pre><code><span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;YYYY-MM-DD hh:mm:ss&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 2020-05-02 10:30:00</span>\n</code></pre></div><table><thead><tr><th>占位符</th><th>输出</th><th>详情</th></tr></thead><tbody><tr><td><code>YY</code></td><td>18</td><td>两位数的年份</td></tr><tr><td><code>YYYY</code></td><td>2018</td><td>四位数的年份</td></tr><tr><td><code>M</code></td><td>1-12</td><td>月份，从 1 开始</td></tr><tr><td><code>MM</code></td><td>01-12</td><td>月份，两位数</td></tr><tr><td><code>MMM</code></td><td>Jan-Dec</td><td>缩写的月份名称</td></tr><tr><td><code>MMMM</code></td><td>January-December</td><td>完整的月份名称</td></tr><tr><td><code>D</code></td><td>1-31</td><td>月份里的一天</td></tr><tr><td><code>DD</code></td><td>01-31</td><td>月份里的一天，两位数</td></tr><tr><td><code>d</code></td><td>0-6</td><td>一周中的一天，星期天是 0</td></tr><tr><td><code>dd</code></td><td>Su-Sa</td><td>最简写的星期几</td></tr><tr><td><code>ddd</code></td><td>Sun-Sat</td><td>简写的星期几</td></tr><tr><td><code>dddd</code></td><td>Sunday-Saturday</td><td>星期几</td></tr><tr><td><code>H</code></td><td>0-23</td><td>小时</td></tr><tr><td><code>HH</code></td><td>00-23</td><td>小时，两位数</td></tr><tr><td><code>h</code></td><td>1-12</td><td>小时, 12 小时制</td></tr><tr><td><code>hh</code></td><td>01-12</td><td>小时, 12 小时制, 两位数</td></tr><tr><td><code>m</code></td><td>0-59</td><td>分钟</td></tr><tr><td><code>mm</code></td><td>00-59</td><td>分钟，两位数</td></tr><tr><td><code>s</code></td><td>0-59</td><td>秒</td></tr><tr><td><code>ss</code></td><td>00-59</td><td>秒 两位数</td></tr><tr><td><code>SSS</code></td><td>000-999</td><td>毫秒 三位数</td></tr><tr><td><code>Z</code></td><td>+05:00</td><td>UTC 的偏移量</td></tr><tr><td><code>ZZ</code></td><td>+0500</td><td>UTC 的偏移量，两位数</td></tr><tr><td><code>A</code></td><td>AM PM</td><td></td></tr><tr><td><code>a</code></td><td>am pm</td><td></td></tr></tbody></table><h3 id="时长duration"><a class="header-anchor" href="#时长duration" aria-hidden="true">#</a> 时长duration</h3><p>使用时长需要引入插件</p><div class="language-js"><pre><code><span class="token keyword">import</span> duration <span class="token keyword">from</span> <span class="token string">&#39;dayjs/plugin/duration&#39;</span>\ndayjs<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>duration<span class="token punctuation">)</span>\n</code></pre></div><p>获取：</p><ul><li>秒：<code>seconds</code></li><li>分：<code>minutes</code></li><li>时：<code>hours</code></li><li>天：<code>days</code></li><li>周：<code>weeks</code></li><li>月：<code>months</code></li><li>年：<code>years</code></li></ul><div class="language-js"><pre><code><span class="token comment">// 获取秒，传入时间戳</span>\ndayjs<span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>\n</code></pre></div><h2 id="四、math"><a class="header-anchor" href="#四、math" aria-hidden="true">#</a> 四、Math</h2><ol><li><code>Math.abs()</code>；取绝对值，负数是他的相反数，正数还是为正；</li><li><code>Math.floor()</code>；向下取整，取最向下最接近的整数；</li><li><code>Math.ceil()</code>；向上取整，取最向上最接近的整数；</li><li><code>Math.round()</code>；四舍五入；-1.6为-2；</li><li><code>Math.min()</code>；取一组数的最小值，括号填写一组数；</li><li><code>Math.max()</code>；取一组数的最大值，括号填写一组数；</li><li><code>Math.pow()</code>；两个值，n的m次方；</li><li><code>Math.sqrt()</code>；开平方</li><li><code>Math.PI</code> 圆周率，没有小括号;</li><li><code>Math.sin()/Math.cos()</code>; 正弦/余弦</li><li><code>Math.trunc(i)</code> : 直接去除小数部分；只对number有效；</li></ol><p>Math.max和Math.min接收多个数字返回最大、最小数，</p><div class="language-js"><pre><code>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token comment">// 53</span>\n<span class="token comment">// 以数组的形式放</span>\nMath<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre></div><h3 id="math-random"><a class="header-anchor" href="#math-random" aria-hidden="true">#</a> Math.random</h3><p><code>Math.random()</code>；取随机数，取出来的是0-1的随机小数；</p><p>套用下面的公式取某个整数范围内随机选择的一个值</p><div class="language-js"><pre><code>值 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> 可能值的总数 <span class="token operator">+</span> 第一个可能的值<span class="token punctuation">)</span>\n</code></pre></div><p>取n-m的随机数：<code>Math.random()*(m-n+1)+n；</code></p><p>比如3-10的随机数：<code>Math.random()*8+3</code>；</p><p>理解随机数：<code>Math.ceil(Math.random()*6)</code> 取1-6；向上取整不会包括0；因为不会到6，所以是6；</p>',104);p.render=function(s,t,p,o,c,l){return n(),a("div",null,[e])};export default p;export{t as __pageData};
